/* web/styles/components.css */

/* --- 按钮基础 --- */
.btn {
    padding: 8px 16px; border-radius: 6px; border: none;
    cursor: pointer; font-size: 14px; font-weight: 500;
    transition: all 0.2s; outline: none;
    display: inline-flex; align-items: center; justify-content: center; gap: 6px;
    white-space: nowrap; /* 防止文字换行 */
}
.btn:active { transform: scale(0.98); }

.btn-sm { padding: 5px 12px; font-size: 12px; }
.btn-xs { padding: 4px 12px; font-size: 12px; border-radius: 4px; }

/* Step 41: 通用大尺寸按钮 (统一标准) */
.btn-lg {
    height: 48px; /* 标准高度 */
    padding: 0 28px; /* 宽敞的内边距 */
    font-size: 15px;
    font-weight: 600;
    border-radius: 8px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px; /* 图标与文字间距 */
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    flex-shrink: 0; /* 防止被压缩 */
    
    /* 兼容性 */
    -webkit-user-select: none;
    user-select: none;
}

/* 悬停通用效果 */
.btn-lg:hover {
    transform: translateY(-2px);
    filter: brightness(1.05);
}
.btn-lg:active {
    transform: translateY(0);
}

.btn-primary { background: var(--primary-color); color: #fff; }
/* 各色按钮的光晕阴影效果 */
.btn-primary.btn-lg { box-shadow: 0 4px 12px rgba(111, 66, 193, 0.3); }
.btn-primary.btn-lg:hover { background: var(--primary-hover); box-shadow: 0 6px 18px rgba(111, 66, 193, 0.4); }

.btn-success { background: var(--success-color); color: #fff; }
.btn-success.btn-lg { box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
.btn-success.btn-lg:hover { filter: brightness(1.1); box-shadow: 0 6px 18px rgba(16, 185, 129, 0.4); }

.btn-warning { background: var(--warning-color); color: #fff; }
.btn-warning.btn-lg { box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3); }
.btn-warning.btn-lg:hover { filter: brightness(1.05); box-shadow: 0 6px 18px rgba(245, 158, 11, 0.4); }

.btn-danger { background: var(--danger-color); color: #fff; }
.btn-danger.btn-lg { box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3); }
.btn-danger.btn-lg:hover { filter: brightness(1.1); box-shadow: 0 6px 18px rgba(239, 68, 68, 0.4); }

.btn-outline { background: transparent; border: 1px solid #d1d5db; color: var(--text-main); }
.btn-outline:hover { border-color: var(--text-main); background: #f9fafb; }
.btn-primary.btn-outline { border-color: var(--primary-color); color: var(--primary-color); }
.btn-primary.btn-outline:hover { background: #f3f0ff; }
/* 轮廓按钮的大尺寸适配 */
.btn-outline.btn-lg { 
    box-shadow: none; border-width: 2px; 
}
.btn-outline.btn-lg:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.btn-text { background: none; padding: 4px 8px; color: var(--text-sub); }
.btn-text:hover { color: var(--primary-color); background: #f0f7ff; border-radius: 4px; }

.btn-icon {
    background: rgba(255,255,255,0.8); border: 1px solid #ddd; 
    cursor: pointer; font-size: 16px; padding: 6px;
    border-radius: 6px; transition: all 0.2s; color: #555;
    display: flex; align-items: center; justify-content: center;
}
.btn-icon:hover { background: #fff; color: var(--primary-color); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

/* 禁用状态的按钮样式 (Step 38) */
.btn:disabled, .type-btn:disabled, .nav-task-btn:disabled {
    opacity: 0.6;
    cursor: not-allowed; /* 鼠标变为禁止符号 */
    background-color: #f3f4f6 !important;
    color: #9ca3af !important;
    border-color: #e5e7eb !important;
    box-shadow: none !important;
    transform: none !important;
    filter: none !important;
}

/* --- 输入框 --- */
.form-input {
    height: 40px; padding: 0 14px;
    border: 1px solid #d1d5db; border-radius: 6px;
    outline: none; font-size: 14px; width: 100%;
    transition: border 0.2s, box-shadow 0.2s;
    background: #fff;
}
.form-input:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(111, 66, 193, 0.1);
}
.form-input:disabled, .form-input:read-only { background: #f3f4f6; color: #6b7280; }

/* --- 卡片 --- */
.card {
    background: #fff; border-radius: 10px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    border: 1px solid rgba(0,0,0,0.02);
    padding: 24px; transition: transform 0.2s;
}
.card h3 { font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--text-main); }

/* --- 开关 Switch --- */
.switch { position: relative; display: inline-block; width: 44px; height: 24px; vertical-align: middle; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute; cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #ccc; transition: .4s;
}
.slider:before {
    position: absolute; content: "";
    height: 18px; width: 18px;
    left: 3px; bottom: 3px;
    background-color: white; transition: .4s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
input:checked + .slider { background-color: var(--success-color); }
input:checked + .slider:before { transform: translateX(20px); }
.slider.round { border-radius: 24px; }
.slider.round:before { border-radius: 50%; }

/* --- 模态框 --- */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); 
    -webkit-backdrop-filter: blur(4px); backdrop-filter: blur(4px);
    z-index: 1000; display: flex; justify-content: center; align-items: center;
}
.modal-overlay.hidden { display: none; }
.modal-window {
    background: #fff; border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    display: flex; flex-direction: column;
    animation: slideUp 0.3s ease;
    overflow: hidden;
}
@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

.create-task-window { width: 1100px; height: 85vh; }
.log-window { width: 900px; height: 600px; }

.modal-header {
    padding: 16px 24px; border-bottom: 1px solid var(--border-color);
    display: flex; justify-content: space-between; align-items: center; background: #fff;
}
.modal-title-input {
    font-size: 18px; font-weight: bold; border: none; 
    border-bottom: 2px solid transparent; padding: 5px 0; width: 300px; 
    outline: none; transition: border-color 0.2s;
}
.modal-title-input:focus { border-bottom-color: var(--primary-color); }
.modal-body { flex: 1; overflow: hidden; display: flex; }
.modal-body.split-body { flex-direction: row; }

/* 模态框组件 */
.field-type-list {
    width: 160px; background: #f9fafb; border-right: 1px solid var(--border-color);
    padding: 16px; display: flex; flex-direction: column; gap: 10px;
}
.type-btn {
    padding: 10px; border: 1px solid #e5e7eb; border-radius: 6px;
    background: #fff; color: #374151; text-align: center; font-size: 13px; font-weight: 500;
    cursor: pointer; transition: all 0.2s;
}
.type-btn:hover { border-color: var(--primary-color); color: var(--primary-color); }

.config-form-area { flex: 1; padding: 0; display: flex; flex-direction: column; background: #fff; }
.input-row { padding: 16px 24px; display: flex; align-items: center; gap: 12px; border-bottom: 1px solid #f0f0f0; }

/* Step 39: 优化表单标签 (强制不换行，防止被挤压) */
.form-label-block {
    margin-bottom: 0; 
    margin-right: 16px; 
    display: block; 
    font-weight: bold;
    white-space: nowrap; 
    flex-shrink: 0; 
    min-width: 70px;
    color: var(--text-main);
}

/* Step 38: 实验性功能提示 */
.experimental-hint {
    font-size: 12px; color: #ef4444; text-align: center; margin-bottom: 12px;
    line-height: 1.5; font-weight: bold; background: #fef2f2; padding: 8px 4px;
    border-radius: 6px; border: 1px dashed #fca5a5;
}

/* 表格 */
.params-table-header {
    display: grid; grid-template-columns: 80px 160px 70px 120px 1fr 60px;
    padding: 12px 24px; background: #f8f9fa; font-weight: 600; color: var(--text-sub); font-size: 13px; border-bottom: 1px solid var(--border-color);
}
.params-list { flex: 1; overflow-y: auto; }
.param-row {
    display: grid; grid-template-columns: 80px 160px 70px 120px 1fr 60px;
    padding: 12px 24px; border-bottom: 1px solid #f0f0f0; align-items: center; gap: 10px;
}
.param-row:hover { background: #fcfcfc; }

/* 日志框 */
.log-body { padding: 20px; display: flex; gap: 20px; }
.log-panel { flex: 1; display: flex; flex-direction: column; }
.log-title { font-weight: bold; margin-bottom: 10px; display: flex; justify-content: space-between; }
.code-box {
    flex: 1; background: #1e1e1e; color: #d4d4d4;
    padding: 15px; border-radius: 6px; font-family: 'Consolas', monospace;
    font-size: 12px; overflow: auto; white-space: pre-wrap; line-height: 1.5;
}

/* --- 上传预览组件 --- */
.upload-widget {
    border: 2px dashed #ddd; border-radius: 8px; padding: 15px; 
    background: #fafafa; transition: all 0.2s;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    min-height: 120px; cursor: pointer; position: relative;
    overflow: hidden;
}
.upload-widget:hover { border-color: var(--primary-color); background: #f0f7ff; }
.upload-widget.has-file { border-style: solid; border-color: var(--success-color); background: #f0fff4; padding: 10px; }

.upload-placeholder { text-align: center; pointer-events: none; }
.upload-icon { font-size: 32px; margin-bottom: 8px; opacity: 0.5; }
.upload-text { font-size: 13px; color: #666; }

.preview-content { 
    display: flex; flex-direction: column; align-items: center; 
    width: 100%; overflow: hidden;
}

.preview-media { 
    max-height: 160px; max-width: 100%; width: auto; height: auto;
    object-fit: contain; border-radius: 4px; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 8px; display: block;
}

.preview-audio-icon { font-size: 48px; margin-bottom: 8px; }
.preview-filename { 
    font-size: 12px; color: #333; font-weight: 600; 
    text-align: center; word-break: break-all; max-width: 90%;
}
.preview-actions { margin-top: 5px; font-size: 12px; color: var(--success-color); }

.btn-clear-file {
    position: absolute; top: 5px; right: 5px;
    background: rgba(255,0,0,0.1); color: red; border: none;
    border-radius: 50%; width: 24px; height: 24px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    z-index: 5;
}
.btn-clear-file:hover { background: red; color: white; }

/* --- 结果预览容器 --- */
.result-viewer-container {
    position: relative; width: 100%; height: 100%;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
}
.result-image-wrapper {
    overflow: hidden; width: 100%; height: 100%;
    display: flex; align-items: center; justify-content: center;
}
.result-image {
    max-width: 95%; max-height: 95%;
    transition: transform 0.2s ease;
    transform-origin: center center;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}

/* --- 文本结果预览增强版 (Step 51) --- */
.text-viewer-wrapper {
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    border: 1px solid #e5e7eb; border-radius: 8px;
    overflow: hidden; background: #fff; position: relative;
}

.text-toolbar {
    display: flex; align-items: center; gap: 6px;
    padding: 8px 12px; background: #f9fafb;
    border-bottom: 1px solid #e5e7eb; flex-wrap: wrap;
    flex-shrink: 0; /* 防止工具栏被压缩 */
}

.toolbar-group {
    display: flex; align-items: center; gap: 4px;
    border-right: 1px solid #e5e7eb; padding-right: 8px; margin-right: 4px;
}
.toolbar-group:last-child { border-right: none; }

/* --- 文本工具栏按钮样式优化 (Step 55) --- */
.toolbar-btn {
    width: 32px; height: 32px;
    border: 1px solid transparent; 
    background: transparent;
    border-radius: 4px; 
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
    
    /* 默认颜色：深灰色 (可撤销状态) */
    color: #4b5563; 
}

/* 悬停效果 (仅非禁用状态) */
.toolbar-btn:hover:not(:disabled) {
    background: #e5e7eb; 
    color: #1f2937; 
}

/* 激活状态 (用于加粗/斜体等开关) */
.toolbar-btn.active { 
    background: #e0e7ff; 
    color: var(--primary-color); 
    border-color: #c7d2fe; 
}

/* 禁用状态：浅灰色 (不可撤销状态) */
.toolbar-btn:disabled {
    color: #d1d5db !important; /* 浅灰色 */
    background: transparent !important;
    cursor: not-allowed;
    opacity: 1; /* 重置默认透明度，由颜色控制 */
}

/* SVG 图标通用样式 */
.toolbar-btn svg {
    width: 18px; 
    height: 18px;
    stroke-width: 2px;
    pointer-events: none; /* 防止点击图标时不触发按钮事件 */
}

.toolbar-select {
    height: 30px; font-size: 12px;
    border: 1px solid #d1d5db; border-radius: 4px;
    padding: 0 4px 0 8px; color: #374151; background: #fff; outline: none; cursor: pointer;
}
.toolbar-select:hover { border-color: var(--primary-color); }

.text-content-area {
    flex: 1; width: 100%;
    padding: 24px;
    resize: none; border: none; outline: none;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    font-size: 16px; /* 默认字号，会被JS覆盖 */
    line-height: 1.5; /* 默认行高，会被JS覆盖 */
    color: #1f2937; background: #fff;
    overflow-y: auto;
}

/* 编辑模式下的文本框样式 */
.text-content-area.is-editing {
    background: #fefefe;
    box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
    border-top: 2px solid var(--primary-color); /* 顶部增加明显的编辑指示条 */
}

/* 重启提示模态框 */
.restart-overlay {
    z-index: 2000 !important;
    background: rgba(255, 255, 255, 0.9);
    -webkit-backdrop-filter: blur(5px); backdrop-filter: blur(5px);
}
.restart-window {
    width: 320px; height: 240px;
    justify-content: center; align-items: center; text-align: center;
    padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.2);
}
.restart-icon {
    font-size: 48px; margin-bottom: 16px;
    color: var(--primary-color); animation: spin 2s infinite linear;
}
.restart-title { margin-bottom: 12px; font-size: 18px; color: var(--text-main); }
.restart-desc { color: var(--text-sub); font-size: 14px; }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

/* --- 结果多文件选择列表 --- */
.file-selection-list {
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    padding: 20px; overflow-y: auto;
    background: #fff;
}
.file-selection-header {
    font-size: 16px; font-weight: bold; margin-bottom: 15px;
    padding-bottom: 10px; border-bottom: 1px solid #eee;
    display: flex; justify-content: space-between; align-items: center;
}
.file-select-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 12px 16px; border: 1px solid #eee; border-radius: 8px;
    margin-bottom: 10px; cursor: pointer; transition: all 0.2s;
}
.file-select-item:hover {
    border-color: var(--primary-color); background: #f9faff;
    transform: translateX(4px);
}
.file-select-name { font-size: 14px; color: #333; font-weight: 500; }
.file-select-icon { font-size: 18px; color: #666; }

/* --- [Modified Step 96] 返回按钮 (优化位置: 右上角) --- */
/* 修改说明：
   1. 将 left: 16px 改为 right: 16px。
   2. 移除 box-shadow 的 X 轴偏移，使阴影更均匀。
*/
.btn-back {
    position: absolute;
    top: 16px;
    right: 16px; /* [修改点] 从 left 改为 right */
    z-index: 100;
    
    background: rgba(255,255,255,0.95);
    border: 1px solid #ddd;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* [修改点] 移除水平偏移 */
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 4px;
    font-weight: 600;
    transition: all 0.2s; /* 添加过渡效果 */
}

.btn-back:hover {
    background: #fff;
    color: var(--primary-color);
    border-color: var(--primary-color);
    box-shadow: 0 4px 12px rgba(111, 66, 193, 0.2); /* [修改点] 增强悬停阴影 */
}

/* --- 结果预览导航按钮 (Step 22, 47) --- */
.nav-btn {
    position: absolute; top: 50%; transform: translateY(-50%);
    width: 44px; height: 44px; border-radius: 50%;
    background: rgba(255, 255, 255, 0.85);
    border: 1px solid #e5e7eb;
    color: #4b5563; font-size: 20px;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; z-index: 50;
    transition: all 0.2s;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    outline: none;
    -webkit-user-select: none; user-select: none;
}

.nav-btn:hover {
    background: #fff; color: var(--primary-color);
    box-shadow: 0 6px 16px rgba(111, 66, 193, 0.2);
    transform: translateY(-50%) scale(1.1);
}
.nav-btn:active { transform: translateY(-50%) scale(0.95); }

.nav-prev { left: 20px; }
.nav-next { right: 20px; }

/* --- Step 24: 轮询设置弹窗样式 --- */
.poll-setting-window { width: 360px; min-height: 220px; border-radius: 12px; }
.center-content { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px 20px; }
.stepper-control { display: flex; align-items: center; gap: 12px; }
.stepper-input {
    width: 80px; height: 42px; text-align: center; font-size: 20px; font-weight: bold;
    color: var(--primary-color); background: #f9fafb;
    -moz-appearance: textfield; -webkit-appearance: textfield; appearance: textfield;
}
.stepper-input::-webkit-outer-spin-button, .stepper-input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.stepper-btn {
    width: 42px; height: 42px; font-size: 16px; padding: 0;
    display: flex; align-items: center; justify-content: center;
    border-radius: 8px; background: #fff; transition: all 0.2s;
}
.stepper-btn:hover { border-color: var(--primary-color); color: var(--primary-color); background: #f3f0ff; }
.stepper-btn:active { transform: scale(0.95); }
.stepper-hint { margin-top: 16px; font-size: 13px; color: #9ca3af; }
.modal-footer {
    padding: 16px 24px; border-top: 1px solid var(--border-color);
    display: flex; justify-content: flex-end; gap: 12px; background: #fcfcfc;
}

/* --- Step 35: 预设功能相关样式 --- */
.preset-modal-window { width: 640px; height: 360px; display: flex; flex-direction: column; }
.full-width { width: 100%; text-align: left; }
.preset-list-container { flex: 1; overflow-y: auto; padding: 10px 20px; display: flex; flex-direction: column; gap: 12px; }
.preset-card {
    border: 1px solid #eee; border-radius: 8px; padding: 12px 16px;
    cursor: pointer; transition: all 0.2s; background: #f9fafb;
    display: flex; flex-direction: column; gap: 6px;
}
.preset-card:hover { border-color: #d1d5db; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
.preset-card.selected { border-color: var(--primary-color); background-color: #f3f0ff; box-shadow: 0 0 0 1px var(--primary-color); }
.preset-card-name { font-weight: 600; font-size: 14px; color: #333; }
.preset-card-key { font-family: monospace; font-size: 12px; color: #666; letter-spacing: 1px; }
.preset-card-header { display: flex; justify-content: space-between; align-items: center; }
.btn-delete-preset { font-size: 12px; color: #ef4444; cursor: pointer; opacity: 0; transition: opacity 0.2s; }
.preset-card:hover .btn-delete-preset { opacity: 1; }

/* --- Step 39: 优化新建任务模态框的自动获取按钮 --- */
#modal-btn-auto { padding: 0 24px; min-width: 110px; white-space: nowrap; justify-content: center; height: 40px; font-size: 14px; line-height: 1; }

/* --- Step 73: 编辑预设 ID 模态框专用样式 (修复内联样式警告) --- */
.preset-edit-window {
    width: 420px;
    height: auto;
}

.preset-edit-body {
    padding: 24px;
    flex-direction: column;
    gap: 20px;
}

.preset-edit-row {
    padding: 0;
    border: none;
    display: flex;
    align-items: center;
    width: 100%;
}

.preset-edit-label {
    width: 100px; /* 固定宽度，对齐输入框 */
    margin-bottom: 0;
    margin-right: 16px;
    font-weight: bold;
    color: var(--text-main);
}

.input-disabled-style {
    background: #f3f4f6;
    color: #666;
    cursor: not-allowed;
}

.preset-hint-text {
    text-align: left;
    margin: 0;
}

/* [Step 80] 通用工具类：Flex布局中强制靠左 */
.btn-left-align {
    margin-right: auto;
}

/* [Step 86] 路径设置模态框专用样式 */
.path-settings-window {
    width: 500px;
    height: auto;
}

/* --- [Optimized] 图像增强预览器组件 (v1.3) --- */

.img-viewer-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background-color: #f3f4f6;
    border-radius: 8px;
}

.img-toolbar {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    background: rgba(255, 255, 255, 0.9);
    border-bottom: 1px solid #e5e7eb;
    z-index: 10;
    flex-shrink: 0;
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
    flex-wrap: wrap;
}

.img-viewport {
    flex: 1;
    width: 100%;
    height: 100%; /* 确保高度撑满 */
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: grab;
    -webkit-user-select: none;
    user-select: none;
    touch-action: none;
    background-image: radial-gradient(#e5e7eb 1px, transparent 1px); /* 可选：添加网格背景增加空间感 */
    background-size: 20px 20px;
}

.img-viewport.is-dragging {
    cursor: grabbing;
}

/* 变换层：必须撑满视口，作为变换基准 */
.img-transform-layer {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    transform-origin: center center;
    transition: transform 0.05s linear; /* 缩短时间以提升跟手度 */
    will-change: transform;
}

/* 图像本体：核心修改 */
.img-content {
    display: block;
    /* [修改] 强制宽高为100%，配合 contain 实现"最长边等于区域限制" */
    width: 100%;
    height: 100%;
    object-fit: contain; 
    
    pointer-events: none;
    /* 移除阴影，因为现在图片可能撑满边缘 */
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.1)); 
}

/* --- 下方工具栏样式保持不变 --- */
.zoom-control-group {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-right: 12px;
    padding-right: 12px;
    border-right: 1px solid #e5e7eb;
}

.zoom-slider {
    -webkit-appearance: none;
    appearance: none;
    width: 100px;
    height: 4px;
    background: #e5e7eb;
    border-radius: 2px;
    outline: none;
    cursor: pointer;
}

.zoom-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    transition: transform 0.1s;
}

.zoom-slider::-webkit-slider-thumb:hover {
    transform: scale(1.2);
}

.toolbar-btn-group {
    display: flex;
    align-items: center;
    gap: 4px;
}

.tool-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid transparent;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    color: #4b5563;
    transition: all 0.2s;
}

.tool-btn:hover {
    background-color: #f3f4f6;
    color: var(--primary-color);
    border-color: #d1d5db;
}

.tool-btn:active {
    transform: scale(0.95);
    background-color: #e5e7eb;
}

.img-viewer-wrapper.fullscreen-mode {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 2000;
    background: #000;
}

.img-viewer-wrapper.fullscreen-mode .img-toolbar {
    background: rgba(30, 30, 30, 0.9);
    border-bottom: 1px solid #444;
}

.img-viewer-wrapper.fullscreen-mode .tool-btn {
    color: #e5e7eb;
}

.img-viewer-wrapper.fullscreen-mode .tool-btn:hover {
    background-color: #444;
}

/* --- [Fixed] 任务列表动态监控图标 --- */

.task-monitor-icon {
    position: relative;
    width: 32px;  /*稍微加大尺寸*/
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: auto; /* 靠右对齐 */
    cursor: default;
}

/* 旋转的外框 (圆角矩形) */
.monitor-border {
    position: absolute;
    top: 0; left: 0; 
    width: 100%; /* [修复] 必须占满父容器 */
    height: 100%; /* [修复] 必须占满父容器 */
    
    border: 2px solid #e5e7eb; /* 默认浅灰边框 */
    border-radius: 10px;       /* 圆角 */
    box-sizing: border-box;
    z-index: 1;                /* 层级在数字之下 */
    
    transform-origin: center center;
    transition: border-color 0.3s ease;
}

/* 中间的数字 */
.monitor-count {
    position: relative;
    z-index: 2; /* 层级在边框之上 */
    font-size: 13px;
    font-weight: 800;
    color: #9ca3af; /* 默认灰色数字 */
    font-family: monospace; 
    transition: color 0.3s ease;
    line-height: 1;
    pointer-events: none;
}

/* --- 激活状态 (有任务 > 0) --- */

/* 激活时：边框变紫 + 开始动画 */
.task-monitor-icon.active .monitor-border {
    border-color: var(--primary-color); /* 变紫色 */
    /* 1秒循环一次，线性过渡 */
    animation: rotate-pulse 1s infinite linear; 
}

/* 激活时：数字变紫 (不旋转) */
.task-monitor-icon.active .monitor-count {
    color: var(--primary-color); 
}

/* --- 核心动画：旋转 + 呼吸缩放 --- */
/* 效果：
   1. 旋转：从 0度 转到 90度 (因为是正方形圆角，90度看起来和0度重合，实现无缝循环)
   2. 缩放：中间 (50%) 稍微变大 (1.15倍)，模拟呼吸感
*/
@keyframes rotate-pulse {
    0% {
        transform: rotate(0deg) scale(1);
    }
    50% {
        transform: rotate(45deg) scale(1.15); /* 旋转途中放大 */
    }
    100% {
        transform: rotate(90deg) scale(1); /* 旋转结束复原 */
    }
}

/* --- [New] 上传组件拖拽状态样式 --- */
.upload-widget.drag-over {
    border-color: var(--primary-color); /* 变紫色边框 */
    background-color: #f0f9ff;          /* 变淡蓝色背景 */
    transform: scale(1.02);             /* 微微放大 */
    box-shadow: 0 4px 12px rgba(111, 66, 193, 0.2);
}

/* [修改] web/styles/pages.css - 新增样式 */

/* --- API 顶部操作区 --- */
.api-top-actions {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px solid #f0f0f0;
}

/* 第一行：获取路径 */
.api-source-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.source-label {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-sub);
}

.source-btns {
    display: flex;
    gap: 10px;
}

.source-btns a {
    text-decoration: none; /* 去掉链接下划线 */
    display: inline-flex;
    align-items: center;
}

/* 第二行：配置按钮 */
.config-btn-row {
    display: flex;
    gap: 16px;
}

/* 调整原来的 api-key-row 的 margin，因为上面已经有 margin 了 */
.api-key-row {
    margin-bottom: 0; 
}

/* --- 并发设置卡片 --- */
.concurrency-options {
    display: flex;
    gap: 12px;
    margin-top: 10px;
}

.btn-concurrency {
    flex: 1; /* 让5个按钮平均分布 */
    height: 44px;
    font-weight: 600;
    color: var(--text-sub);
    border-color: #d1d5db;
    background: #fff;
    transition: all 0.2s;
}

.btn-concurrency:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
    background: #f3f0ff;
}

/* 选中状态 */
.btn-concurrency.active {
    background: var(--primary-color);
    color: #fff;
    border-color: var(--primary-color);
    box-shadow: 0 4px 10px rgba(111, 66, 193, 0.3);
}

/* [新增] web/styles/components.css */

/* --- 1. 应用配置列表样式优化 --- */
.preset-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px; /* 增加一点下间距 */
}

.preset-name-group {
    display: flex;
    align-items: center;
    gap: 8px; /* 名称和并发标签的间距 */
}

.preset-card-name {
    font-weight: 600;
    font-size: 15px;
    color: #333;
}

/* [重点] 高亮的并发数标签 */
.preset-concurrency-badge {
    font-size: 12px;
    font-weight: 800;          /* 加粗 */
    color: var(--primary-color); /* 紫色高亮 */
    background: #f3f0ff;       /* 浅紫背景 */
    padding: 2px 8px;
    border-radius: 4px;
    border: 1px solid #dcd6f7;
}

/* --- 2. 全局轻提示 (Toast) --- */
.global-toast {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(0, 0, 0, 0.75);
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 500;
    z-index: 9999;
    pointer-events: none; /* 防止遮挡点击 */
    
    opacity: 0;
    transition: opacity 0.3s ease, transform 0.3s ease;
}

.global-toast.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

/* --- 文本阅读器加强版样式 --- */

.text-viewer-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
    background: #fff;
    position: relative;
}

/* 工具栏容器 */
.text-toolbar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: #f9fafb;
    border-bottom: 1px solid #e5e7eb;
    flex-wrap: wrap;
    flex-shrink: 0;
    min-height: 48px;
}

/* 工具栏分组 */
.toolbar-group {
    display: flex;
    align-items: center;
    gap: 4px;
    border-right: 1px solid #e5e7eb;
    padding-right: 8px;
    margin-right: 4px;
}
.toolbar-group:last-child {
    border-right: none;
}

/* 按钮通用 */
.toolbar-btn {
    min-width: 32px;
    height: 32px;
    padding: 0 8px;
    border: 1px solid transparent;
    background: transparent;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #4b5563;
    transition: all 0.2s;
    font-size: 14px;
    font-weight: 500;
}

/* 按钮悬停 */
.toolbar-btn:hover:not(:disabled) {
    background: #e5e7eb;
    color: #1f2937;
}

/* 按钮激活状态 (如 Bold) */
.toolbar-btn.active {
    background: #e0e7ff;
    color: var(--primary-color);
    border-color: #c7d2fe;
}

/* 按钮禁用状态 */
.toolbar-btn:disabled {
    color: #d1d5db;
    cursor: not-allowed;
    opacity: 0.7;
}

/* 特殊按钮：编辑/保存 */
.toolbar-btn.btn-primary {
    background: var(--primary-color);
    color: white;
}
.toolbar-btn.btn-primary:hover {
    background: var(--primary-hover);
    color: white;
}

/* SVG 图标尺寸 */
.toolbar-btn svg {
    width: 16px;
    height: 16px;
}

/* 下拉选择框 */
.toolbar-select {
    height: 30px;
    font-size: 12px;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    padding: 0 24px 0 8px; /* 留出箭头空间 */
    color: #374151;
    background-color: #fff;
    outline: none;
    cursor: pointer;
    
    /* 简单的自定义箭头 */
    appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 4px center;
    background-size: 14px;
}
.toolbar-select:hover {
    border-color: var(--primary-color);
}

/* 文本内容区域 */
.text-content-area {
    flex: 1;
    width: 100%;
    padding: 24px;
    resize: none;
    border: none;
    outline: none;
    
    /* 基础字体设置，具体会被 JS 覆盖 */
    font-family: system-ui, -apple-system, sans-serif;
    color: #1f2937;
    background: #fff;
    overflow-y: auto;
    
    transition: background 0.3s;
}

/* 编辑模式下的文本框样式 */
.text-content-area.is-editing {
    background: #fefefe;
    /* 顶部增加内部阴影或边框提示正在编辑 */
    box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
}